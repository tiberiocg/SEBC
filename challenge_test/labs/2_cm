[ec2-user@ip-172-31-1-15 ~]$ ls /etc/yum.repos.d
cloudera-cdh5.repo  cloudera-manager.repo  redhat.repo  redhat-rhui-client-config.repo  redhat-rhui.repo  rhui-load-balancers.conf


[ec2-user@ip-172-31-1-15 ~]$ sudo /usr/share/cmf/schema/scm_prepare_database.sh mysql -h ip-172-31-0-163.us-west-2.compute.internal -u root -p scm scm scm
Enter database password:
JAVA_HOME=/usr/java/jdk1.7.0_67-cloudera
Verifying that we can write to /etc/cloudera-scm-server
Creating SCM configuration file in /etc/cloudera-scm-server
Executing:  /usr/java/jdk1.7.0_67-cloudera/bin/java -cp /usr/share/java/mysql-connector-java.jar:/usr/share/java/oracle-connector-java.jar:/usr/share/cmf/schema/../lib/* com.cloudera.enterprise.dbutil.DbCommandExecutor /etc/cloudera-scm-server/db.properties com.cloudera.cmf.db.
[                          main] DbCommandExecutor              INFO  Successfully connected to database.
All done, your SCM database is configured correctly!
[ec2-user@ip-172-31-1-15 ~]$ sudo service cloudera-scm-agent start
Starting cloudera-scm-agent (via systemctl):               [  OK  ]
[ec2-user@ip-172-31-1-15 ~]$ sudo service cloudera-scm-server start
Starting cloudera-scm-server (via systemctl):              [  OK  ]


[ec2-user@ip-172-31-1-15 ~]$ sudo head -1 /var/log/cloudera-scm-server/cloudera-scm-server.log
2017-04-28 10:40:57,131 INFO main:com.cloudera.server.cmf.Main: Starting SCM Server. JVM Args: [-Dlog4j.configuration=file:/etc/cloudera-scm-server/log4j.properties, -Dfile.encoding=UTF-8, -Dcmf.root.logger=INFO,LOGFILE, -Dcmf.log.dir=/var/log/cloudera-scm-server, -Dcmf.log.file=cloudera-scm-server.log, -Dcmf.jetty.threshhold=WARN, -Dcmf.schema.dir=/usr/share/cmf/schema, -Djava.awt.headless=true, -Djava.net.preferIPv4Stack=true, -Dpython.home=/usr/share/cmf/python, -XX:+UseConcMarkSweepGC, -XX:+UseParNewGC, -XX:+HeapDumpOnOutOfMemoryError, -Xmx2G, -XX:MaxPermSize=256m, -XX:+HeapDumpOnOutOfMemoryError, -XX:HeapDumpPath=/tmp, -XX:OnOutOfMemoryError=kill -9 %p], Args: [], Version: 5.9.2 (#3 built by jenkins on 20170330-1814 git: 822da28bff818f57fc1bfc3eafe3a550300ef1b0)

[ec2-user@ip-172-31-1-15 ~]$ sudo cat /var/log/cloudera-scm-server/cloudera-scm-server.log | grep "Started Jetty server"
2017-04-28 10:42:10,207 INFO WebServerImpl:com.cloudera.server.cmf.WebServerImpl: Started Jetty server.

[ec2-user@ip-172-31-1-15 ~]$ sudo cat /etc/cloudera-scm-server/db.properties
# Auto-generated by scm_prepare_database.sh on Fri Apr 28 10:40:47 EDT 2017
#
# For information describing how to configure the Cloudera Manager Server
# to connect to databases, see the "Cloudera Manager Installation Guide."
#
com.cloudera.cmf.db.type=mysql
com.cloudera.cmf.db.host=ip-172-31-0-163.us-west-2.compute.internal
com.cloudera.cmf.db.name=scm
com.cloudera.cmf.db.user=scm
com.cloudera.cmf.db.password=scm
com.cloudera.cmf.db.setupType=EXTERNAL
